(this["webpackJsonpe-shop"]=this["webpackJsonpe-shop"]||[]).push([[0],{80:function(t,e,a){},81:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a(11),c=a.n(r),i=a(25),s=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,117)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,i=e.getTTFB;a(t),n(t),r(t),c(t),i(t)}))},u=a(13),o=a(4);function d(){return Object(o.jsx)("div",{className:"main-header-wrapper",children:Object(o.jsxs)("header",{className:"main-header",children:[Object(o.jsxs)("h1",{className:"e-shop",children:["e-sh",Object(o.jsx)("span",{className:"colored",children:"o"}),"p"]}),Object(o.jsx)("div",{className:"horizontal-line"}),Object(o.jsx)("div",{className:"nav-btn-container",children:Object(o.jsx)(i.c,{className:"nav-btn",exact:!0,to:"/",children:"home"})})]})})}var l=a(18),p=a.n(l),b=a(27),h=a(29),j=a(30),m=a(32),f=a(31),v=a(46),g=(a(74),a(76),{getRef:function(t){return v.a.database().ref(t)}}),O={apiKey:"AIzaSyCS142LthvcfvYfjWUwc6DTUWpRbVkLr7U",authDomain:"e-shop-ad79d.firebaseapp.com",databaseURL:"https://e-shop-ad79d-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"e-shop-ad79d",storageBucket:"e-shop-ad79d.appspot.com",messagingSenderId:"774917610561",appId:"1:774917610561:web:c9e1a8d4cc7ac359477ac0"};v.a.apps.length||v.a.initializeApp(O);var x={getProducts:function(){return y.apply(this,arguments)},getById:function(t){return w.apply(this,arguments)}};function y(){return(y=Object(b.a)(p.a.mark((function t(){var e,a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=g.getRef("products"),t.next=4,e.get();case 4:return a=t.sent,n=a.exists()?a.val():null,t.abrupt("return",n);case 9:throw t.prev=9,t.t0=t.catch(0),console.log("Had Issues getting products from db"),console.dir(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function w(){return(w=Object(b.a)(p.a.mark((function t(e){var a,n,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=g.getRef("products").orderByChild("id").equalTo(e),t.next=4,a.get();case 4:return n=t.sent,r=n.exists()?n.val():null,t.abrupt("return",N(r));case 9:throw t.prev=9,t.t0=t.catch(0),console.log("Had Issues getting product with id: ".concat(e," from db")),console.dir(t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}function N(t){return Object.values(t)[0]}var I=function(t){Object(m.a)(a,t);var e=Object(f.a)(a);function a(){return Object(h.a)(this,a),e.apply(this,arguments)}return Object(j.a)(a,[{key:"render",value:function(){var t=this.props.product;return Object(o.jsx)("section",{className:"product-preview-container",children:Object(o.jsxs)(i.b,{className:"product-preview",to:"product/".concat(t.id),children:[Object(o.jsx)("div",{className:"product-preview-img",children:Object(o.jsx)("img",{className:"img-fit",src:t.images[0].url,alt:"product-main-img"})}),Object(o.jsx)("div",{className:"product-preview-title",children:t.title}),Object(o.jsx)("div",{className:"product-preview-price",children:t.max_price!==t.min_price?"".concat(new Intl.NumberFormat("en-IN",{style:"currency",currency:"USD"}).format(t.min_price)," - ").concat(new Intl.NumberFormat("en-IN",{style:"currency",currency:"USD"}).format(t.max_price)):new Intl.NumberFormat("en-IN",{style:"currency",currency:"USD"}).format(t.max_price)})]})})}}]),a}(n.Component);function S(t){var e=t.products;return Object(o.jsx)("div",{className:"products-list-grid",children:e.map((function(t){return Object(o.jsx)(I,{product:t},t.id)}))})}var V=function(t){Object(m.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={},t.loadProducts=Object(b.a)(p.a.mark((function e(){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.getProducts();case 2:a=e.sent,t.setState({products:a});case 4:case"end":return e.stop()}}),e)}))),t}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.loadProducts()}},{key:"render",value:function(){var t=this.state.products;return t?Object(o.jsxs)("section",{className:"home",children:[Object(o.jsx)("div",{className:"home-header",children:Object(o.jsx)("div",{className:"rectangle",children:Object(o.jsx)("h1",{className:"home-title products",children:"products"})})}),Object(o.jsx)(S,{products:t})]}):Object(o.jsx)("div",{})}}]),a}(n.Component),k=a(53),A=a(114),D=a(115),C=function(t){Object(m.a)(a,t);var e=Object(f.a)(a);function a(){var t;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(t=e.call.apply(e,[this].concat(r))).state={product:null,primaryImg:null,dropdownsValues:null,updatedAttributes:null,mapAttributeIdToLabelData:{},quantity:1},t.loadProduct=Object(b.a)(p.a.mark((function e(){var a,n,r,c,i,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props.match.params.id,e.next=3,x.getById(a);case 3:n=e.sent,r=n.images[0],c=t.getMatchingPropertiesByImage(n,r),i=c.updatedAttributes,s=c.dropdownsValues,t.setState({product:n,primaryImg:r,updatedAttributes:i,dropdownsValues:s});case 7:case"end":return e.stop()}}),e)}))),t.getMatchingPropertiesByImage=function(e,a){var n=t.getMatchingVariants(e,a),r=t.getAttributeToLabelsMaps(n),c=t.getUpdatedVariantAttributes(e,r);return{updatedAttributes:c,dropdownsValues:t.createDropdownsValues(c)}},t.getMatchingVariants=function(t,e){return t.variants.filter((function(t){return t.image.title===e.title}))},t.getAttributeToLabelsMaps=function(t){return t.reduce((function(t,e){for(var a=e.labels,n=function(e){var n=t.findIndex((function(t){return t.attribute_id===a[e].attribute_id}));if(n>-1){var r=a[e].label_id;t[n].labelsIds.includes(r)||t[n].labelsIds.push(r)}else{var c={attribute_id:a[e].attribute_id,labelsIds:[a[e].label_id]};t.push(c)}},r=0;r<a.length;r++)n(r);return t}),[])},t.getUpdatedVariantAttributes=function(t,e){var a=t.attributes;return e.reduce((function(t,e){var n=Object(k.a)({},a.find((function(t){return t.id===e.attribute_id}))),r=n.labels.filter((function(t){var a=t.id;return e.labelsIds.includes(a)})),c={id:n.id,title:n.title,type:n.type,labels:r};return t.push(c),t}),[])},t.createDropdownsValues=function(t){var e={};return t.forEach((function(t){e[t.id]=1===t.labels.length?t.labels[0].data:""})),e},t.updateDropDownValues=function(e,a){var n=t.state.dropdownsValues;n[e]=a,t.setState({dropdownsValues:n})},t.onSelectImage=function(e){var a=t.state.product,n=t.getMatchingPropertiesByImage(a,e),r=n.updatedAttributes,c=n.dropdownsValues;t.setState({primaryImg:e,dropdownsValues:c,updatedAttributes:r})},t.handleChange=function(e){return function(a){var n=a.target,r=e,c=n.value;t.updateDropDownValues(r,c)}},t.getSelectedVariant=function(){var e=t.state,a=e.product,n=e.dropdownsValues,r=Object(k.a)({},a),c=r.attributes,i=r.variants;return null===i||void 0===i?void 0:i.find((function(t){for(var e=0,a=function(a){var r=t.labels[a],i=r.label_id,s=r.attribute_id;c.find((function(t){return t.id===s})).labels.find((function(t){return t.id===i})).data===n[s]&&e++},r=0;r<t.labels.length;r++)a(r);return e===t.labels.length}))},t.CheckAllDropdownsSelected=function(){var e=t.state,a=e.dropdownsValues,n=e.product;return!(!a||!n)&&Object.values(a).filter((function(t){return""!==t})).length===n.attributes.length},t.changeQuantity=function(e){var a=t.state.quantity,n="down"===e?t.decrease(a):t.increase(a);t.setState({quantity:n})},t.increase=function(t){return 10===t?t:++t},t.decrease=function(t){return 1===t?t:--t},t.buildUpdatedProductTitle=function(){var e=t.state,a=e.product,n=e.dropdownsValues,r=a.title,c=function(t){if(""!==n[t]){var e=a.attributes.find((function(e){return e.id===t})),c=e.labels.find((function(e){return e.data===n[t]}));r+=" ".concat(e.title,": ").concat(c.title,".")}};for(var i in n)c(i);return r},t}return Object(j.a)(a,[{key:"componentDidMount",value:function(){this.loadProduct()}},{key:"render",value:function(){var t,e=this,a=this.state,n=a.product,r=a.primaryImg,c=this.state.updatedAttributes,i=this.getSelectedVariant(),s=this.CheckAllDropdownsSelected();return n?Object(o.jsxs)("section",{className:"product-details",children:[Object(o.jsx)("div",{className:"image-gallery",children:null===(t=n.images)||void 0===t?void 0:t.map((function(t,a){return Object(o.jsx)("img",{className:"img-".concat(a," gallery-child").concat(t.title===r.title?" primary":""),src:t.url,onClick:function(){return e.onSelectImage(t)},alt:"product-img"},a)}))}),Object(o.jsxs)("div",{className:"product-info",children:[Object(o.jsx)("div",{className:"product-title",children:(null===i||void 0===i?void 0:i.title)||this.buildUpdatedProductTitle()}),i&&Object(o.jsx)("div",{className:"product-price",children:"Price: ".concat(new Intl.NumberFormat("en-IN",{style:"currency",currency:"USD"}).format(i.price))}),!i&&Object(o.jsxs)(o.Fragment,{children:[s&&Object(o.jsx)("div",{className:"product-price",children:"Out of Stock"}),!s&&Object(o.jsx)("div",{className:"calculate-price",children:"(Please Select all options to calculate price)"})]}),Object(o.jsx)("p",{className:"product-description",children:n.description})]}),Object(o.jsxs)("form",{className:"variant-form",children:[Object(o.jsx)("div",{className:"dropdowns-container",onSubmit:this.onClickSubmit,children:c.map((function(t){return Object(o.jsx)(A.a,{id:t.id,fullWidth:!0,select:!0,label:t.title,value:e.state.dropdownsValues[t.id],type:t.type,onChange:e.handleChange(t.id),variant:"outlined",children:t.labels.map((function(t){return Object(o.jsx)(D.a,{value:t.data,children:t.title},t.id)}))},t.id)}))}),Object(o.jsxs)("div",{className:"quantity-select",children:[Object(o.jsx)("div",{className:"quantity-title",children:"Quantity"}),Object(o.jsxs)("div",{className:"quantity-input",children:[Object(o.jsx)("div",{className:"decrease-btn",onClick:function(){return e.changeQuantity("down")},children:"-"}),Object(o.jsx)("div",{className:"custom-input",children:this.state.quantity}),Object(o.jsx)("div",{className:"increase-btn",onClick:function(){return e.changeQuantity("up")},children:"+"})]})]}),Object(o.jsx)("div",{className:"btn variant-form-submit-btn ",children:Object(o.jsx)("div",{className:"Add-to-cart",children:"Add to cart"})})]})]}):Object(o.jsx)("div",{})}}]),a}(n.Component);function P(){return Object(o.jsxs)("div",{className:"app",children:[Object(o.jsx)(d,{}),Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{component:C,path:"/product/:id"}),Object(o.jsx)(u.a,{component:V,path:"/"})]})]})}a(80);c.a.render(Object(o.jsx)(i.a,{children:Object(o.jsx)(P,{})}),document.getElementById("root")),s()}},[[81,1,2]]]);
//# sourceMappingURL=main.fac67a69.chunk.js.map